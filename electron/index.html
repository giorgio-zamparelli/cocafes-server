<!DOCTYPE html>
<html ng-app="app" manifest="./appcache.mf">
<head>

    <meta charset="utf-8" />
    <title>Cocafes - find friends working in cafes near you</title>
    <meta name="description" content="find friends workin in cafes near you" />
    <link rel="canonical" href="https://cocafes.herokuapp.com" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="mobile-web-app-capable" content="yes">

    <%-dependencies%>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDsmiYX2EzjgLKKUubxcNLXgweqP7uWmOc&libraries=places"></script>

    <link href="./styles/main.css" media="all" rel="stylesheet" type="text/css" />

    <script>

        window.applicationCache.addEventListener('updateready', function(e) {

            if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {

                window.location.reload();

            } else {
                // Manifest didn't changed. Nothing new to server.
            }

        }, false);

        var checkManifest = function () {

            if(navigator.onLine){

                // If we don't make sure there is an appcache to do stuff with, we'll get a DOM EXCEPTION: ERROR CODE 11
                if(window.applicationCache.status != window.applicationCache.UNCACHED) {
                    window.applicationCache.update();
                }

             }/*else{
                 console.log('Offline, so no checking.')
             }*/

        };

        setInterval(checkManifest, 60000);

        checkManifest();

    </script>

</head>
<body>

    <div ng-view style="height:100%"></div>

</body>
</html>
